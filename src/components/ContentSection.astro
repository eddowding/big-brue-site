---
interface Bullet {
  text: string;
  icon: 'checkmark' | 'star' | 'arrow';
}

interface CTA {
  text: string;
  url: string;
  showArrow: boolean;
}

interface Props {
  sectionId: string;
  heading: string;
  subheading?: string;
  pricingText?: string;
  bullets?: Bullet[];
  description?: string[];
  cta?: CTA;
  backgroundColor?: string;
  textColor?: string;
  bodyContent?: any;
}

const {
  sectionId,
  heading,
  subheading,
  pricingText,
  bullets,
  description,
  cta,
  backgroundColor = 'white',
  textColor = 'sludge',
  bodyContent: BodyContent
} = Astro.props;

// Build class strings for Tailwind
const bgClasses: Record<string, string> = {
  'bright': 'bg-bright',
  'stone': 'bg-stone',
  'blush': 'bg-blush',
  'white': 'bg-white'
};

const textClasses: Record<string, string> = {
  'sludge': 'text-sludge',
  'sludge-dark': 'text-sludge-dark',
  'warm-black': 'text-warm-black'
};

const textOpacityClasses: Record<string, string> = {
  'sludge': 'text-sludge/80',
  'sludge-dark': 'text-sludge-dark/80',
  'warm-black': 'text-warm-black/80'
};

const textLightClasses: Record<string, string> = {
  'sludge': 'text-sludge/70',
  'sludge-dark': 'text-sludge-dark/70',
  'warm-black': 'text-warm-black/70'
};

const bgClass = bgClasses[backgroundColor] || 'bg-white';
const textClass = textClasses[textColor] || 'text-sludge';
const textOpacityClass = textOpacityClasses[textColor] || 'text-sludge/80';
const textLightClass = textLightClasses[textColor] || 'text-sludge/70';
---

<section id={sectionId} class={`py-16 md:py-24 ${bgClass}`}>
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="max-w-3xl mx-auto text-center">

      <!-- Heading -->
      <h2 class={`text-3xl md:text-4xl lg:text-5xl font-extrabold ${textClass} mb-4`}>
        {heading}
      </h2>

      <!-- Subheading -->
      {subheading && (
        <p class={`text-xl md:text-2xl font-medium ${textOpacityClass} mb-2`}>
          {subheading}
        </p>
      )}

      <!-- Pricing Text -->
      {pricingText && (
        <p class={`text-lg ${textLightClass} mb-8`} set:html={pricingText} />
      )}

      <!-- Bullet List -->
      {bullets && bullets.length > 0 && (
        <ul class="space-y-4 mb-8 text-left max-w-md mx-auto">
          {bullets.map(bullet => (
            <li class="flex items-start gap-3">
              {bullet.icon === 'checkmark' && (
                <svg class={`w-6 h-6 ${textClass} shrink-0 mt-0.5`} fill="currentColor" viewBox="0 0 20 20">
                  <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
                </svg>
              )}
              {bullet.icon === 'star' && (
                <svg class={`w-6 h-6 ${textClass} shrink-0 mt-0.5`} fill="currentColor" viewBox="0 0 20 20">
                  <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"/>
                </svg>
              )}
              {bullet.icon === 'arrow' && (
                <svg class={`w-6 h-6 ${textClass} shrink-0 mt-0.5`} fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"/>
                </svg>
              )}
              <span class={textClass}>{bullet.text}</span>
            </li>
          ))}
        </ul>
      )}

      <!-- Body Content (markdown) -->
      {BodyContent && (
        <div class={`${textOpacityClass} mb-8`}>
          <BodyContent />
        </div>
      )}

      <!-- Description Paragraphs -->
      {description && description.map((para, index) => (
        <p class={`text-lg md:text-xl ${textOpacityClass} mb-6 leading-relaxed`}>
          {para}
        </p>
      ))}

      <!-- CTA Button -->
      {cta && (
        <a
          href={cta.url}
          class="inline-flex items-center gap-2 bg-sludge hover:bg-sludge-dark text-white font-bold px-8 py-4 rounded-full text-lg transition-all hover:scale-105"
        >
          {cta.text}
          {cta.showArrow && (
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"/>
            </svg>
          )}
        </a>
      )}

    </div>
  </div>
</section>
